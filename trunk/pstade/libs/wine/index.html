<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.3.10: http://docutils.sourceforge.net/" />
<title>The Wine Utility Library</title>
<meta name="author" content="MB" />
<style type="text/css">

@import "http://p-stade.sourceforge.net/doc/boost.css";
@import "http://p-stade.sourceforge.net/doc/poost.css";

</style>
</head>
<body>
<div class="document" id="the-wine-utility-library">
<h1 class="title">The Wine Utility Library</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>MB</td></tr>
<tr><th class="docinfo-name">Contact:</th>
<td><a class="first last reference" href="mailto:mb2act&#64;yahoo.co.jp">mb2act&#64;yahoo.co.jp</a></td></tr>
<tr class="field"><th class="docinfo-name">License:</th><td class="field-body">Distributed under the <a class="reference" href="http://www.boost.org/LICENSE_1_0.txt">Boost Software License Version 1.0</a></td>
</tr>
<tr><th class="docinfo-name">Version:</th>
<td>0.90.3</td></tr>
</tbody>
</table>
<blockquote class="epigraph">
<p>&quot;<em>Language is wine upon the lips.</em>&quot;</p>
<p class="attribution">&mdash;Virginia Woolf</p>
</blockquote>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first"><a name="table-of-contents"><strong>Table of Contents</strong></a></p>
<ul class="auto-toc simple">
<li><a class="reference" href="#introduction" id="id8" name="id8">1&nbsp;&nbsp;&nbsp;Introduction</a></li>
<li><a class="reference" href="#requirements" id="id9" name="id9">2&nbsp;&nbsp;&nbsp;Requirements</a></li>
<li><a class="reference" href="#tested-under" id="id10" name="id10">3&nbsp;&nbsp;&nbsp;Tested Under</a></li>
<li><a class="reference" href="#pstade-arg" id="id11" name="id11">4&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">pstade::arg</span></tt></a></li>
<li><a class="reference" href="#pstade-const" id="id12" name="id12">5&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">pstade::const_</span></tt></a></li>
<li><a class="reference" href="#pstade-derived-cast" id="id13" name="id13">6&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">pstade::derived_cast</span></tt></a></li>
<li><a class="reference" href="#pstade-has-xxx" id="id14" name="id14">7&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_HAS_XXX</span></tt></a></li>
<li><a class="reference" href="#pstade-instance" id="id15" name="id15">8&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_INSTANCE</span></tt></a></li>
<li><a class="reference" href="#pstade-intergral-cast" id="id16" name="id16">9&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">pstade::intergral_cast</span></tt></a></li>
<li><a class="reference" href="#is-debug" id="id17" name="id17">10&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">is_debug</span></tt></a></li>
<li><a class="reference" href="#pstade-nullptr" id="id18" name="id18">11&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_NULLPTR</span></tt></a></li>
<li><a class="reference" href="#pstade-pause" id="id19" name="id19">12&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">pstade::pause</span></tt></a></li>
<li><a class="reference" href="#pstade-protect" id="id20" name="id20">13&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_PROTECT</span></tt></a></li>
<li><a class="reference" href="#unnamed" id="id21" name="id21">14&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">unnamed</span></tt></a></li>
<li><a class="reference" href="#pstade-unused" id="id22" name="id22">15&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">pstade::unused</span></tt></a></li>
<li><a class="reference" href="#references" id="id23" name="id23">16&nbsp;&nbsp;&nbsp;References</a></li>
<li><a class="reference" href="#release-notes" id="id24" name="id24">17&nbsp;&nbsp;&nbsp;Release Notes</a><ul class="auto-toc">
<li><a class="reference" href="#version-0-90-0" id="id25" name="id25">17.1&nbsp;&nbsp;&nbsp;Version 0.90.0</a></li>
<li><a class="reference" href="#version-0-90-1" id="id26" name="id26">17.2&nbsp;&nbsp;&nbsp;Version 0.90.1</a></li>
<li><a class="reference" href="#version-0-90-2" id="id27" name="id27">17.3&nbsp;&nbsp;&nbsp;Version 0.90.2</a></li>
<li><a class="reference" href="#version-0-90-3" id="id28" name="id28">17.4&nbsp;&nbsp;&nbsp;Version 0.90.3</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h1><a class="toc-backref" href="#id8" name="introduction">1&nbsp;&nbsp;&nbsp;Introduction</a></h1>
<p>Wine provides primitive functions and classes which are somehow missing from C++.
All the names belong to <tt class="docutils literal"><span class="pre">namespace</span> <span class="pre">pstade</span></tt>. If a name is a function,
the name is qualified.</p>
</div>
<div class="section" id="requirements">
<h1><a class="toc-backref" href="#id9" name="requirements">2&nbsp;&nbsp;&nbsp;Requirements</a></h1>
<ul class="simple">
<li><a class="reference" href="http://www.boost.org/">Boost C++ Libraries Version 1.33.1</a> or later (no compilation required)</li>
<li><a class="reference" href="http://sourceforge.net/project/showfiles.php?group_id=141222&amp;package_id=173059">P-Stade C++ Libraries Version 0.97.3</a> or later (no compilation required, give a higher priority than Boost headers)</li>
</ul>
</div>
<div class="section" id="tested-under">
<h1><a class="toc-backref" href="#id10" name="tested-under">3&nbsp;&nbsp;&nbsp;Tested Under</a></h1>
<ul class="simple">
<li>Microsoft Visual C++ 2005 Express Edition</li>
<li>Microsoft Visual C++ .NET Version 7.1</li>
<li>GCC 3.4.4</li>
</ul>
</div>
<div class="section" id="pstade-arg">
<h1><a class="toc-backref" href="#id11" name="pstade-arg">4&nbsp;&nbsp;&nbsp;<tt class="docutils literal docutils literal"><span class="pre">pstade::arg</span></tt></a></h1>
<p>todo</p>
</div>
<div class="section" id="pstade-const">
<h1><a class="toc-backref" href="#id12" name="pstade-const">5&nbsp;&nbsp;&nbsp;<tt class="docutils literal docutils literal"><span class="pre">pstade::const_</span></tt></a></h1>
<p>todo</p>
</div>
<div class="section" id="pstade-derived-cast">
<h1><a class="toc-backref" href="#id13" name="pstade-derived-cast">6&nbsp;&nbsp;&nbsp;<tt class="docutils literal docutils literal"><span class="pre">pstade::derived_cast</span></tt></a></h1>
<p><tt class="docutils literal"><span class="pre">pstade::derived_cast</span></tt> is a type-safe cast from a base class to the derived class.
It just calls <tt class="docutils literal"><span class="pre">static_cast</span></tt>, but the name makes codes clearer:</p>
<pre class="cpp_source">
<span class="cpp_pp_directive">#include </span>&lt;pstade/derived_cast.hpp&gt;

<span class="cpp_comment">// CRTP
</span><span class="cpp_keyword">template</span>&lt; <span class="cpp_keyword">class </span>Derived &gt;
<span class="cpp_keyword">struct </span>WindowBase
{
    <span class="cpp_keyword">void </span>create()
    {
        pstade::derived_cast&lt;Derived&gt;(*<span class="cpp_keyword">this</span>).create_impl();

        Derived&amp; d = pstade::derived(*<span class="cpp_keyword">this</span>);
        d.create_impl();;
    }
};
</pre>

<p><tt class="docutils literal"><span class="pre">pstade::derived</span></tt> provides the automatic conversion.</p>
</div>
<div class="section" id="pstade-has-xxx">
<h1><a class="toc-backref" href="#id14" name="pstade-has-xxx">7&nbsp;&nbsp;&nbsp;<tt class="docutils literal docutils literal"><span class="pre">PSTADE_HAS_XXX</span></tt></a></h1>
<p>todo</p>
</div>
<div class="section" id="pstade-instance">
<h1><a class="toc-backref" href="#id15" name="pstade-instance">8&nbsp;&nbsp;&nbsp;<tt class="docutils literal docutils literal"><span class="pre">PSTADE_INSTANCE</span></tt></a></h1>
<p>todo</p>
</div>
<div class="section" id="pstade-intergral-cast">
<h1><a class="toc-backref" href="#id16" name="pstade-intergral-cast">9&nbsp;&nbsp;&nbsp;<tt class="docutils literal docutils literal"><span class="pre">pstade::intergral_cast</span></tt></a></h1>
<p>todo</p>
</div>
<div class="section" id="is-debug">
<h1><a class="toc-backref" href="#id17" name="is-debug">10&nbsp;&nbsp;&nbsp;<tt class="docutils literal docutils literal"><span class="pre">is_debug</span></tt></a></h1>
<p><tt class="docutils literal"><span class="pre">is_debug</span></tt> is a nullary <a class="reference" href="http://www.boost.org/libs/mpl/doc/refmanual/metafunction.html">Metafunction</a> that returns <tt class="docutils literal"><span class="pre">boost::mpl::true_</span></tt> if <tt class="docutils literal"><span class="pre">NDEBUG</span></tt> is not defined; otherwise <tt class="docutils literal"><span class="pre">boost::mpl::false_</span></tt>:</p>
<pre class="cpp_source">
<span class="cpp_keyword">struct </span>release_impl
{
    <span class="cpp_keyword">void </span><span class="cpp_keyword">operator</span>()()
    {
        BOOST_ASSERT(( !pstade::is_debug&lt;&gt;::value ));
    }
};

<span class="cpp_keyword">struct </span>debug_impl
{
    <span class="cpp_keyword">void </span><span class="cpp_keyword">operator</span>()()
    {
        BOOST_ASSERT(( pstade::is_debug&lt;&gt;::value ));
    }
};

<span class="cpp_keyword">void </span>test_is_debug()
{
    <span class="cpp_keyword">using </span><span class="cpp_keyword">namespace </span>boost::mpl;

    if_&lt; not_&lt; pstade::is_debug&lt;&gt; &gt;,
        release_impl,
        debug_impl
    &gt;::type()();
}</pre>

<p>Macros and <a class="reference" href="http://www.boost.org/libs/mpl/doc/refmanual/metafunction.html">Metafunction</a>s are on different layers. You might reject this fusion.
On the other hand, you must be against macros if &quot;possible&quot;.</p>
</div>
<div class="section" id="pstade-nullptr">
<h1><a class="toc-backref" href="#id18" name="pstade-nullptr">11&nbsp;&nbsp;&nbsp;<tt class="docutils literal docutils literal"><span class="pre">PSTADE_NULLPTR</span></tt></a></h1>
<p>It is the macro which represents the null pointer, which is defined <tt class="docutils literal"><span class="pre">0</span></tt>.
Additional information is available at the proposal <a class="reference" href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1601.pdf">A name for the null pointer: nullptr</a>.</p>
</div>
<div class="section" id="pstade-pause">
<h1><a class="toc-backref" href="#id19" name="pstade-pause">12&nbsp;&nbsp;&nbsp;<tt class="docutils literal docutils literal"><span class="pre">pstade::pause</span></tt></a></h1>
<p>todo</p>
</div>
<div class="section" id="pstade-protect">
<h1><a class="toc-backref" href="#id20" name="pstade-protect">13&nbsp;&nbsp;&nbsp;<tt class="docutils literal docutils literal"><span class="pre">PSTADE_PROTECT</span></tt></a></h1>
<p>todo</p>
</div>
<div class="section" id="unnamed">
<h1><a class="toc-backref" href="#id21" name="unnamed">14&nbsp;&nbsp;&nbsp;<tt class="docutils literal docutils literal"><span class="pre">unnamed</span></tt></a></h1>
<p>todo</p>
</div>
<div class="section" id="pstade-unused">
<h1><a class="toc-backref" href="#id22" name="pstade-unused">15&nbsp;&nbsp;&nbsp;<tt class="docutils literal docutils literal"><span class="pre">pstade::unused</span></tt></a></h1>
<p>Though an unused variable makes the cumbersome &quot;unused variable&quot; warning, it sometimes helps you.
The legacy workaround shows:</p>
<pre class="cpp_source">
<span class="cpp_comment">/*
virtual int test_unused(int x, int /*option*/</span>)
{
    <span class="cpp_keyword">return </span>x+<span class="cpp_number_literal">1</span>;
}
*/</pre>

<p><tt class="docutils literal"><span class="pre">pstade::unused</span></tt> is a function whose body is empty. It suppresses the warning:</p>
<pre class="cpp_source">
<span class="cpp_pp_directive">#include </span>&lt;pstade/unused.hpp&gt;
<span class="cpp_comment">// ...
</span><span class="cpp_keyword">virtual </span><span class="cpp_keyword">int </span>test_unused(<span class="cpp_keyword">int </span>x, <span class="cpp_keyword">int </span>option)
{
    pstade::unused(option);
    <span class="cpp_keyword">return </span>x+<span class="cpp_number_literal">1</span>;
}</pre>

<p>A smart compiler easily removes such an empty function as <tt class="docutils literal"><span class="pre">pstade::unused</span></tt>.
Note that <tt class="docutils literal"><span class="pre">(void)option</span></tt> could still make the warning. One of the useful cases is:</p>
<pre class="cpp_source">
<span class="cpp_keyword">struct </span>X; <span class="cpp_comment">// declaration only

</span>X&amp; foo();

<span class="cpp_keyword">void </span>unused_is_nice()
{
    <span class="cpp_comment">// foo(); error C2027 under VC8
    </span>pstade::unused(foo()); <span class="cpp_comment">// ok
</span>}</pre>

<p>The error seems conforming one, but <tt class="docutils literal"><span class="pre">pstade::unused</span></tt> can work around.</p>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id23" name="references">16&nbsp;&nbsp;&nbsp;References</a></h1>
<ul class="simple">
<li><a class="reference" href="http://p-stade.sourceforge.net/">P-Stade</a></li>
<li><a class="reference" href="http://www.boost-consulting.com/metaprogramming-book.html">C++ Template Metaprogramming</a></li>
<li><a class="reference" href="http://www.josuttis.com/tmplbook/">C++ Templates - The Complete Guide</a></li>
<li><a class="reference" href="http://www.boost.org/">Boost C++ Libraries</a></li>
<li><a class="reference" href="http://www.boost.org/libs/mpl/doc/">Boost.MPL</a></li>
<li><a class="reference" href="http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2004/n1674.pdf">A Proposal to Improve const_iterator Use from C++0X Containers</a></li>
<li><a class="reference" href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1601.pdf">A name for the null pointer: nullptr</a></li>
<li><a class="reference" href="http://gcc.gnu.org/ml/gcc-bugs/1999-06n/msg00493.html">Cast to void</a></li>
</ul>
</div>
<div class="section" id="release-notes">
<h1><a class="toc-backref" href="#id24" name="release-notes">17&nbsp;&nbsp;&nbsp;Release Notes</a></h1>
<div class="section" id="version-0-90-0">
<h2><a class="toc-backref" href="#id25" name="version-0-90-0">17.1&nbsp;&nbsp;&nbsp;Version 0.90.0</a></h2>
<ul class="simple">
<li>Initial version released.</li>
</ul>
</div>
<div class="section" id="version-0-90-1">
<h2><a class="toc-backref" href="#id26" name="version-0-90-1">17.2&nbsp;&nbsp;&nbsp;Version 0.90.1</a></h2>
<ul class="simple">
<li>Updated the document.</li>
</ul>
</div>
<div class="section" id="version-0-90-2">
<h2><a class="toc-backref" href="#id27" name="version-0-90-2">17.3&nbsp;&nbsp;&nbsp;Version 0.90.2</a></h2>
<ul class="simple">
<li>Removed <tt class="docutils literal"><span class="pre">const_</span></tt>, which was the same as <tt class="docutils literal"><span class="pre">boost:lambda::make_const</span></tt>.</li>
<li>Changed <tt class="docutils literal"><span class="pre">nullptr_</span></tt> to the macro.</li>
</ul>
</div>
<div class="section" id="version-0-90-3">
<h2><a class="toc-backref" href="#id28" name="version-0-90-3">17.4&nbsp;&nbsp;&nbsp;Version 0.90.3</a></h2>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">const_</span></tt> came back.</li>
<li>Renamed <tt class="docutils literal"><span class="pre">crtp_cast</span></tt> to <tt class="docutils literal"><span class="pre">derived_cast</span></tt>.</li>
</ul>
</div>
</div>
</div>
<div class="footer">
<hr class="footer" />
<a class="reference" href="doc/index.rst">View document source</a>.
Generated on: 2006-03-18 09:39 UTC.
Generated by <a class="reference" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.

</div>
</body>
</html>
