<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4: http://docutils.sourceforge.net/" />
<title>The Wine Utility Library</title>
<meta name="author" content="MB" />
<style type="text/css">

@import "http://p-stade.sourceforge.net/doc/boost.css";
@import "http://p-stade.sourceforge.net/doc/poost.css";

</style>
</head>
<body>
<div class="document" id="the-wine-utility-library">
<h1 class="title">The Wine Utility Library</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>MB</td></tr>
<tr><th class="docinfo-name">Contact:</th>
<td><a class="first last reference" href="mailto:mb2act&#64;yahoo.co.jp">mb2act&#64;yahoo.co.jp</a></td></tr>
<tr class="field"><th class="docinfo-name">License:</th><td class="field-body">Distributed under the <a class="reference" href="http://www.boost.org/LICENSE_1_0.txt">Boost Software License Version 1.0</a></td>
</tr>
<tr><th class="docinfo-name">Version:</th>
<td>0.90.4</td></tr>
</tbody>
</table>
<blockquote class="epigraph">
<p>&quot;<em>Language is wine upon the lips.</em>&quot;</p>
<p class="attribution">&mdash;Virginia Woolf</p>
</blockquote>
<div class="contents topic">
<p class="topic-title first"><a id="table-of-contents" name="table-of-contents"><strong>Table of Contents</strong></a></p>
<ul class="auto-toc simple">
<li><a class="reference" href="#introduction" id="id9" name="id9">1&nbsp;&nbsp;&nbsp;Introduction</a></li>
<li><a class="reference" href="#requirements" id="id10" name="id10">2&nbsp;&nbsp;&nbsp;Requirements</a></li>
<li><a class="reference" href="#tested-under" id="id11" name="id11">3&nbsp;&nbsp;&nbsp;Tested Under</a></li>
<li><a class="reference" href="#pstade-adl-barrier" id="id12" name="id12">4&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_ADL_BARRIER</span></tt></a></li>
<li><a class="reference" href="#arg" id="id13" name="id13">5&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">arg</span></tt></a></li>
<li><a class="reference" href="#arraya" id="id14" name="id14">6&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">arraya</span></tt></a></li>
<li><a class="reference" href="#const" id="id15" name="id15">7&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">const_</span></tt></a></li>
<li><a class="reference" href="#const-overloaded" id="id16" name="id16">8&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">const_overloaded</span></tt></a></li>
<li><a class="reference" href="#derived-cast" id="id17" name="id17">9&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">derived_cast</span></tt></a></li>
<li><a class="reference" href="#design-by-contract" id="id18" name="id18">10&nbsp;&nbsp;&nbsp;Design by Contract</a><ul class="auto-toc">
<li><a class="reference" href="#pstade-precondition" id="id19" name="id19">10.1&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_PRECONDITION</span></tt></a></li>
<li><a class="reference" href="#pstade-public-precondition" id="id20" name="id20">10.2&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_PUBLIC_PRECONDITION</span></tt></a></li>
<li><a class="reference" href="#pstade-block-invariant" id="id21" name="id21">10.3&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_BLOCK_INVARIANT</span></tt></a></li>
</ul>
</li>
<li><a class="reference" href="#pstade-instance" id="id22" name="id22">11&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_INSTANCE</span></tt></a></li>
<li><a class="reference" href="#is-ndebug" id="id23" name="id23">12&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">is_ndebug</span></tt></a></li>
<li><a class="reference" href="#is-same" id="id24" name="id24">13&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">is_same</span></tt></a></li>
<li><a class="reference" href="#new" id="id25" name="id25">14&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">new_</span></tt></a></li>
<li><a class="reference" href="#nonassignable" id="id26" name="id26">15&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">nonassignable</span></tt></a></li>
<li><a class="reference" href="#pstade-nullptr" id="id27" name="id27">16&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_NULLPTR</span></tt></a></li>
<li><a class="reference" href="#pause" id="id28" name="id28">17&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">pause</span></tt></a></li>
<li><a class="reference" href="#pstade-statement" id="id29" name="id29">18&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_STATEMENT</span></tt></a></li>
<li><a class="reference" href="#static-c" id="id30" name="id30">19&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">static_c</span></tt></a></li>
<li><a class="reference" href="#pstade-unparenthesize" id="id31" name="id31">20&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_UNPARENTHESIZE</span></tt></a></li>
<li><a class="reference" href="#unused" id="id32" name="id32">21&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">unused</span></tt></a></li>
<li><a class="reference" href="#acknowledgments" id="id33" name="id33">22&nbsp;&nbsp;&nbsp;Acknowledgments</a></li>
<li><a class="reference" href="#release-notes" id="id34" name="id34">23&nbsp;&nbsp;&nbsp;Release Notes</a><ul class="auto-toc">
<li><a class="reference" href="#version-0-90-0" id="id35" name="id35">23.1&nbsp;&nbsp;&nbsp;Version 0.90.0</a></li>
<li><a class="reference" href="#version-0-90-1" id="id36" name="id36">23.2&nbsp;&nbsp;&nbsp;Version 0.90.1</a></li>
<li><a class="reference" href="#version-0-90-2" id="id37" name="id37">23.3&nbsp;&nbsp;&nbsp;Version 0.90.2</a></li>
<li><a class="reference" href="#version-0-90-3" id="id38" name="id38">23.4&nbsp;&nbsp;&nbsp;Version 0.90.3</a></li>
<li><a class="reference" href="#version-0-90-4" id="id39" name="id39">23.5&nbsp;&nbsp;&nbsp;Version 0.90.4</a></li>
</ul>
</li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id9" id="introduction" name="introduction">1&nbsp;&nbsp;&nbsp;Introduction</a></h1>
<p>Wine provides primitive functions and classes which are somehow missing from C++.
All the names belong to <tt class="docutils literal"><span class="pre">namespace</span> <span class="pre">pstade</span></tt>.</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id10" id="requirements" name="requirements">2&nbsp;&nbsp;&nbsp;Requirements</a></h1>
<ul class="simple">
<li><a class="reference" href="http://www.boost.org/">Boost C++ Libraries Version 1.33.1</a> or later (no compilation required)</li>
<li><a class="reference" href="http://sourceforge.net/project/showfiles.php?group_id=141222&amp;package_id=173059">P-Stade C++ Libraries Version 1.00.5</a> or later (no compilation required, give a higher priority than Boost headers)</li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id11" id="tested-under" name="tested-under">3&nbsp;&nbsp;&nbsp;Tested Under</a></h1>
<ul class="simple">
<li>Microsoft Visual C++ 2005 Express Edition</li>
<li>Microsoft Visual C++ .NET Version 7.1</li>
<li>GCC 3.4.4</li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id12" id="pstade-adl-barrier" name="pstade-adl-barrier">4&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_ADL_BARRIER</span></tt></a></h1>
<p><tt class="docutils literal"><span class="pre">PSTADE_ADL_BARRIER</span></tt> protects names from ADL invasions:</p>
<pre class="cpp_source">
<span class="cpp_keyword">namespace </span>xxx {

    PSTADE_ADL_BARRIER(aaa) {

        <span class="cpp_keyword">struct </span>aaa { };

    }

    <span class="cpp_keyword">void </span>begin(aaa)
    {
        BOOST_CHECK(<span class="cpp_keyword">false</span>);
    }

}

<span class="cpp_keyword">void </span>begin(xxx::aaa) { }

<span class="cpp_keyword">void </span>test()
{
    xxx::aaa a;
    begin(a);
}
</pre>

<p>Now <tt class="docutils literal"><span class="pre">xxx::aaa</span></tt> is isolated from <tt class="docutils literal"><span class="pre">xxx::begin</span></tt>, so <tt class="docutils literal"><span class="pre">::begin</span></tt> is called.</p>
<ul class="simple">
<li>Header: <tt class="docutils literal"><span class="pre">&lt;pstade/adl_barrier.hpp&gt;</span></tt></li>
<li>Valid expression: <tt class="docutils literal"><span class="pre">PSTADE_ADL_BARRIER(id)</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></tt></li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id13" id="arg" name="arg">5&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">arg</span></tt></a></h1>
<p>A non-const rvalue cannot bind to the deduced non-const reference.
<tt class="docutils literal"><span class="pre">arg</span></tt> works around it:</p>
<pre class="cpp_source">
<span class="cpp_keyword">template</span>&lt; <span class="cpp_keyword">class </span>T &gt;
<span class="cpp_keyword">void </span>foo(T&amp;)
{ }


<span class="cpp_keyword">void </span>test()
{
    ::foo(pstade::arg(<span class="cpp_number_literal">1</span>));
}</pre>

<ul class="simple">
<li>Header: <tt class="docutils literal"><span class="pre">&lt;pstade/arg.hpp&gt;</span></tt></li>
<li>Valid expression: <tt class="docutils literal"><span class="pre">arg(x)</span></tt></li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id14" id="arraya" name="arraya">6&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">arraya</span></tt></a></h1>
<p><tt class="docutils literal"><span class="pre">arraya</span></tt> is a replacement for the infamous <tt class="docutils literal"><span class="pre">alloca</span></tt>.</p>
<ul class="simple">
<li>Header: <tt class="docutils literal"><span class="pre">&lt;pstade/arraya.hpp&gt;</span></tt></li>
<li>Valid expression: <tt class="docutils literal"><span class="pre">arraya&lt;t&gt;</span> <span class="pre">a(sz);</span></tt> and <tt class="docutils literal"><span class="pre">a.get()</span></tt>, where <tt class="docutils literal"><span class="pre">t</span></tt> is a typename.</li>
<li>Semantics: <tt class="docutils literal"><span class="pre">a.get()</span></tt> returns a pointer whose type is <tt class="docutils literal"><span class="pre">t*</span></tt>.</li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id15" id="const" name="const">7&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">const_</span></tt></a></h1>
<p><tt class="docutils literal"><span class="pre">const_</span></tt> just const-qualifies its argument.</p>
<ul class="simple">
<li>Header: <tt class="docutils literal"><span class="pre">&lt;pstade/const.hpp&gt;</span></tt></li>
<li>Valid expression: <tt class="docutils literal"><span class="pre">const_(x)</span></tt></li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id16" id="const-overloaded" name="const-overloaded">8&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">const_overloaded</span></tt></a></h1>
<p>Pending...</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id17" id="derived-cast" name="derived-cast">9&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">derived_cast</span></tt></a></h1>
<p><tt class="docutils literal"><span class="pre">derived_cast</span></tt> is a type-safe cast from a base class to the derived class.
It just calls <tt class="docutils literal"><span class="pre">static_cast</span></tt>, but the name makes codes clearer:</p>
<pre class="cpp_source">
<span class="cpp_pp_directive">#include </span>&lt;pstade/derived_cast.hpp&gt;

<span class="cpp_comment">// CRTP
</span><span class="cpp_keyword">template</span>&lt; <span class="cpp_keyword">class </span>Derived &gt;
<span class="cpp_keyword">struct </span>WindowBase
{
    <span class="cpp_keyword">void </span>create()
    {
        pstade::derived_cast&lt;Derived&gt;(*<span class="cpp_keyword">this</span>).create_impl();

        Derived&amp; d = pstade::derived(*<span class="cpp_keyword">this</span>);
        d.create_impl();;
    }
};
</pre>

<p><tt class="docutils literal"><span class="pre">derived</span></tt> provides the automatic conversion.</p>
<ul class="simple">
<li>Header: <tt class="docutils literal"><span class="pre">&lt;pstade/const.hpp&gt;</span></tt></li>
<li>Valid expression: <tt class="docutils literal"><span class="pre">D&amp;</span> <span class="pre">d</span> <span class="pre">=</span> <span class="pre">derived(b)</span></tt></li>
<li>Precondition: <tt class="docutils literal"><span class="pre">D</span></tt> is derived from the type of <tt class="docutils literal"><span class="pre">b</span></tt>.</li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id18" id="design-by-contract" name="design-by-contract">10&nbsp;&nbsp;&nbsp;Design by Contract</a></h1>
<p>Pending...</p>
<ul class="simple">
<li>Header: <tt class="docutils literal"><span class="pre">&lt;pstade/contract.hpp&gt;</span></tt></li>
</ul>
<div class="section">
<h2><a class="toc-backref" href="#id19" id="pstade-precondition" name="pstade-precondition">10.1&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_PRECONDITION</span></tt></a></h2>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id20" id="pstade-public-precondition" name="pstade-public-precondition">10.2&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_PUBLIC_PRECONDITION</span></tt></a></h2>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id21" id="pstade-block-invariant" name="pstade-block-invariant">10.3&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_BLOCK_INVARIANT</span></tt></a></h2>
</div>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id22" id="pstade-instance" name="pstade-instance">11&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_INSTANCE</span></tt></a></h1>
<p>C++ has the power to define objects in headers by using <tt class="docutils literal"><span class="pre">static</span></tt> keyword, but
has some pitfalls, which <tt class="docutils literal"><span class="pre">PSTADE_INSTANCE</span></tt> works around.</p>
<ul class="simple">
<li>Header: <tt class="docutils literal"><span class="pre">&lt;pstade/instance.hpp&gt;</span></tt></li>
<li>Valid expression: <tt class="docutils literal"><span class="pre">PSTADE_INSTANCE(t,</span> <span class="pre">n,</span> <span class="pre">value)</span></tt> or <tt class="docutils literal"><span class="pre">PSTADE_INSTANCE(t,</span> <span class="pre">n,</span> <span class="pre">seq)</span></tt></li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id23" id="is-ndebug" name="is-ndebug">12&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">is_ndebug</span></tt></a></h1>
<p><tt class="docutils literal"><span class="pre">is_ndebug</span></tt> is a nullary <a class="reference" href="http://www.boost.org/libs/mpl/doc/refmanual/metafunction.html">Metafunction</a> that returns <tt class="docutils literal"><span class="pre">boost::mpl::true_</span></tt> if <tt class="docutils literal"><span class="pre">NDEBUG</span></tt> is defined;
otherwise, <tt class="docutils literal"><span class="pre">boost::mpl::false_</span></tt>. Moreover, it is convertible to <tt class="docutils literal"><span class="pre">boost::mpl::true_</span></tt> if <tt class="docutils literal"><span class="pre">NDEBUG</span></tt> is defined;
otherwise, convertible to <tt class="docutils literal"><span class="pre">boost::mpl::false_</span></tt>:</p>
<pre class="cpp_source">
<span class="cpp_keyword">void </span>impl(boost::mpl::true_)
{
    BOOST_CHECK(( pstade::is_ndebug&lt;&gt;::value ));
    std::cout &lt;&lt; <span class="cpp_string_literal">&quot;release mode&quot;</span>;
}

<span class="cpp_keyword">void </span>impl(boost::mpl::false_)
{
    BOOST_CHECK(( !pstade::is_ndebug&lt;&gt;::value ));
    std::cout &lt;&lt; <span class="cpp_string_literal">&quot;debug mode&quot;</span>;
}

<span class="cpp_keyword">void </span>test()
{
    ::impl(pstade::is_ndebug&lt;&gt;());
}
</pre>

<ul class="simple">
<li>Header: <tt class="docutils literal"><span class="pre">&lt;pstade/is_ndebug.hpp&gt;</span></tt></li>
<li>Valid expression: <tt class="docutils literal"><span class="pre">is_ndebug&lt;&gt;</span></tt></li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id24" id="is-same" name="is-same">13&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">is_same</span></tt></a></h1>
<ul class="simple">
<li>Header: <tt class="docutils literal"><span class="pre">&lt;pstade/is_same.hpp&gt;</span></tt></li>
<li>Valid expression: <tt class="docutils literal"><span class="pre">is_same(x,</span> <span class="pre">y)</span></tt></li>
<li>Returns: <tt class="docutils literal"><span class="pre">true</span></tt> if <tt class="docutils literal"><span class="pre">x</span></tt> and <tt class="docutils literal"><span class="pre">y</span></tt> are the same object; otherwise, <tt class="docutils literal"><span class="pre">false</span></tt>.</li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id25" id="new" name="new">14&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">new_</span></tt></a></h1>
<p>Pending...</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id26" id="nonassignable" name="nonassignable">15&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">nonassignable</span></tt></a></h1>
<p>Class <tt class="docutils literal"><span class="pre">nonassignable</span></tt> is a base class.
Derive your own class from <tt class="docutils literal"><span class="pre">nonassignable</span></tt> when you want to prohibit copy assignment.</p>
<ul class="simple">
<li>Header: <tt class="docutils literal"><span class="pre">&lt;pstade/nonassignable.hpp&gt;</span></tt></li>
<li>Valid expression: <tt class="docutils literal"><span class="pre">class</span> <span class="pre">A</span> <span class="pre">:</span> <span class="pre">nonassignable</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">};</span></tt></li>
<li>Postcondition: <tt class="docutils literal"><span class="pre">a1</span> <span class="pre">=</span> <span class="pre">a2</span></tt> is invalid, where <tt class="docutils literal"><span class="pre">a1</span></tt> and <tt class="docutils literal"><span class="pre">a2</span></tt> are types of <tt class="docutils literal"><span class="pre">A</span></tt>.</li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id27" id="pstade-nullptr" name="pstade-nullptr">16&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_NULLPTR</span></tt></a></h1>
<p>It is the macro which represents the null pointer, which is defined <tt class="docutils literal"><span class="pre">0</span></tt>.
Additional information is available at the proposal <a class="reference" href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1601.pdf">A name for the null pointer: nullptr</a>.</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id28" id="pause" name="pause">17&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">pause</span></tt></a></h1>
<p>Pending...</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id29" id="pstade-statement" name="pstade-statement">18&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_STATEMENT</span></tt></a></h1>
<p>Pending...</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id30" id="static-c" name="static-c">19&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">static_c</span></tt></a></h1>
<p>Pending...</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id31" id="pstade-unparenthesize" name="pstade-unparenthesize">20&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">PSTADE_UNPARENTHESIZE</span></tt></a></h1>
<p>Macros regard <cite>,</cite> as an argument separator. This makes problem when
you pass a type to macros. <tt class="docutils literal"><span class="pre">PSTADE_UNPARENTHESIZE</span></tt> works around it:</p>
<pre class="cpp_source">
BOOST_FOREACH (
    PSTADE_UNPARENTHESIZE((std::pair&lt;<span class="cpp_keyword">int</span>, <span class="cpp_keyword">int</span>&gt;)) p,
    your_map
) {
    <span class="cpp_comment">// ...
</span>}</pre>

<p>If the argument type is a dependent name, add <tt class="docutils literal"><span class="pre">typename</span></tt> before.</p>
<ul class="simple">
<li>Header: <tt class="docutils literal"><span class="pre">&lt;pstade/unparenthesize.hpp&gt;</span></tt></li>
<li>Valid expression: <tt class="docutils literal"><span class="pre">PSTADE_UNPARENTHESIZE((t))</span></tt></li>
<li>Precondition: <tt class="docutils literal"><span class="pre">t</span></tt> is a type name.</li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id32" id="unused" name="unused">21&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">unused</span></tt></a></h1>
<p>Though an unused variable makes the cumbersome &quot;unused variable&quot; warning, it sometimes helps you.
The legacy workaround shows:</p>
<pre class="cpp_source">
<span class="cpp_comment">/*
virtual int test_unused(int x, int /*option*/</span>)
{
    <span class="cpp_keyword">return </span>x+<span class="cpp_number_literal">1</span>;
}
*/</pre>

<p><tt class="docutils literal"><span class="pre">unused</span></tt> is a function whose body is empty. It suppresses the warning:</p>
<pre class="cpp_source">
<span class="cpp_pp_directive">#include </span>&lt;pstade/unused.hpp&gt;
<span class="cpp_comment">// ...
</span><span class="cpp_keyword">virtual </span><span class="cpp_keyword">int </span>test_unused(<span class="cpp_keyword">int </span>x, <span class="cpp_keyword">int </span>option)
{
    pstade::unused(option);
    <span class="cpp_keyword">return </span>x+<span class="cpp_number_literal">1</span>;
}</pre>

<p>A smart compiler easily removes such an empty function as <tt class="docutils literal"><span class="pre">unused</span></tt>.
Note that <tt class="docutils literal"><span class="pre">(void)option</span></tt> could still make the warning. One of the useful cases is:</p>
<pre class="cpp_source">
<span class="cpp_keyword">struct </span>X; <span class="cpp_comment">// declaration only

</span>X&amp; foo();

<span class="cpp_keyword">void </span>unused_is_nice()
{
    <span class="cpp_comment">// foo(); error C2027 under VC8
    </span>pstade::unused(foo()); <span class="cpp_comment">// ok
</span>}</pre>

<p>The error seems conforming one, but <tt class="docutils literal"><span class="pre">unused</span></tt> can work around.</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id33" id="acknowledgments" name="acknowledgments">22&nbsp;&nbsp;&nbsp;Acknowledgments</a></h1>
<ul class="simple">
<li><a class="reference" href="http://p-stade.sourceforge.net/">P-Stade</a></li>
<li><a class="reference" href="http://www.boost-consulting.com/metaprogramming-book.html">C++ Template Metaprogramming</a></li>
<li><a class="reference" href="http://www.josuttis.com/tmplbook/">C++ Templates - The Complete Guide</a></li>
<li><a class="reference" href="http://www.boost.org/">Boost C++ Libraries</a></li>
<li><a class="reference" href="http://www.boost.org/libs/mpl/doc/">Boost.MPL</a></li>
<li><a class="reference" href="http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2004/n1674.pdf">A Proposal to Improve const_iterator Use from C++0X Containers</a></li>
<li><a class="reference" href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1601.pdf">A name for the null pointer: nullptr</a></li>
<li><a class="reference" href="http://gcc.gnu.org/ml/gcc-bugs/1999-06n/msg00493.html">Cast to void</a></li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id34" id="release-notes" name="release-notes">23&nbsp;&nbsp;&nbsp;Release Notes</a></h1>
<div class="section">
<h2><a class="toc-backref" href="#id35" id="version-0-90-0" name="version-0-90-0">23.1&nbsp;&nbsp;&nbsp;Version 0.90.0</a></h2>
<ul class="simple">
<li>Released initial version.</li>
</ul>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id36" id="version-0-90-1" name="version-0-90-1">23.2&nbsp;&nbsp;&nbsp;Version 0.90.1</a></h2>
<ul class="simple">
<li>Updated the document.</li>
</ul>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id37" id="version-0-90-2" name="version-0-90-2">23.3&nbsp;&nbsp;&nbsp;Version 0.90.2</a></h2>
<ul class="simple">
<li>Removed <tt class="docutils literal"><span class="pre">const_</span></tt>, which was the same as <tt class="docutils literal"><span class="pre">boost:lambda::make_const</span></tt>.</li>
<li>Changed <tt class="docutils literal"><span class="pre">nullptr_</span></tt> to the macro.</li>
</ul>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id38" id="version-0-90-3" name="version-0-90-3">23.4&nbsp;&nbsp;&nbsp;Version 0.90.3</a></h2>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">const_</span></tt> came back.</li>
<li>Renamed <tt class="docutils literal"><span class="pre">crtp_cast</span></tt> to <tt class="docutils literal"><span class="pre">derived_cast</span></tt>.</li>
</ul>
</div>
<div class="section">
<h2><a class="toc-backref" href="#id39" id="version-0-90-4" name="version-0-90-4">23.5&nbsp;&nbsp;&nbsp;Version 0.90.4</a></h2>
<ul class="simple">
<li>Updated the document.</li>
<li>Renamed <tt class="docutils literal"><span class="pre">PSTADE_COMMA_PROTECT</span></tt> to <tt class="docutils literal"><span class="pre">PSTADE_UNPARENTHESIZE</span></tt></li>
</ul>
</div>
</div>
</div>
<div class="footer">
<hr class="footer" />
<a class="reference" href="doc/index.rst">View document source</a>.
Generated on: 2006-08-25 20:21 UTC.
Generated by <a class="reference" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.

</div>
</body>
</html>
