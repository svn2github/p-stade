BOOST_FOREACH (
    PSTADE_COMMA_PROTECT((std::pair<int, int>)) p,
    your_map
) {
    // ...
}