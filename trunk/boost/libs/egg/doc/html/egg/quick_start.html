<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Quick Start</title>
<link rel="stylesheet" href="../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="../index.html" title="Chapter 1. Egg 0.90.5">
<link rel="up" href="../index.html" title="Chapter 1. Egg 0.90.5">
<link rel="prev" href="../index.html" title="Chapter 1. Egg 0.90.5">
<link rel="next" href="concepts.html" title="Concepts">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../boost.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../index.html"><img src="../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="concepts.html"><img src="../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="egg.quick_start"></a><a href="quick_start.html" title="Quick Start">Quick Start</a></h2></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="quick_start.html#egg.quick_start.installing_egg">Installing Egg</a></span></dt>
<dt><span class="section"><a href="quick_start.html#egg.quick_start.why_egg_">Why Egg?</a></span></dt>
<dt><span class="section"><a href="quick_start.html#egg.quick_start.building_functions">Building functions</a></span></dt>
<dt><span class="section"><a href="quick_start.html#egg.quick_start.higher_order_functions">Higher-order
      functions</a></span></dt>
<dt><span class="section"><a href="quick_start.html#egg.quick_start.reading_doc">Reading Doc</a></span></dt>
</dl></div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="egg.quick_start.installing_egg"></a><a href="quick_start.html#egg.quick_start.installing_egg" title="Installing Egg">Installing Egg</a></h3></div></div></div>
<a name="egg.quick_start.installing_egg.getting_egg"></a><h5>
<a name="id514602"></a>
        <a href="quick_start.html#egg.quick_start.installing_egg.getting_egg">Getting Egg</a>
      </h5>
<p>
        You can get <a href="http://www.boost-consulting.com/vault/index.php?action=downloadfile&amp;filename=egg.zip&amp;directory=Function%20Objects&amp;" target="_top"><code class="computeroutput"><span class="identifier">egg</span><span class="special">.</span><span class="identifier">zip</span></code></a>
        from <a href="http://www.boost-consulting.com/vault/index.php" target="_top">Boost.Vault</a>/FunctionObjects.
        Also, if you have an svn client, the <a href="https://p-stade.svn.sourceforge.net/svnroot/p-stade/trunk/boost" target="_top">Egg
        svn repository</a> is available using the following command:
      </p>
<pre class="programlisting">svn co https://p-stade.svn.sourceforge.net/svnroot/p-stade/trunk/boost/ boost_egg
</pre>
<a name="egg.quick_start.installing_egg.building_egg"></a><h5>
<a name="id514682"></a>
        <a href="quick_start.html#egg.quick_start.installing_egg.building_egg">Building Egg</a>
      </h5>
<p>
        Egg is a header-only library. There is no need to build or link to any lib
        files.
      </p>
<a name="egg.quick_start.installing_egg.requirements"></a><h5>
<a name="id514712"></a>
        <a href="quick_start.html#egg.quick_start.installing_egg.requirements">Requirements</a>
      </h5>
<p>
        Egg requires <a href="http://www.boost.org" target="_top"><span class="bold"><strong>Boost
        C++ Libraries</strong></span></a> Version 1.34.1 or later. You don't need
        to build any Boost libraries.
      </p>
<a name="egg.quick_start.installing_egg.portability"></a><h5>
<a name="id514752"></a>
        <a href="quick_start.html#egg.quick_start.installing_egg.portability">Portability</a>
      </h5>
<p>
        Egg is known to work on the following platforms:
      </p>
<div class="itemizedlist"><ul type="disc">
<li>
          Microsoft Visual C++ Version 7.1 or later
        </li>
<li>
          GCC 3.4.4 or later
        </li>
</ul></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="egg.quick_start.why_egg_"></a><a href="quick_start.html#egg.quick_start.why_egg_" title="Why Egg?">Why Egg?</a></h3></div></div></div>
<p>
        Assume you have to design lazily filtered sequences. (It is called <code class="computeroutput"><span class="identifier">filter</span></code> in <a href="http://www.haskell.org/" target="_top">Haskell</a>.)
        Thanks to <a href="http://boost.org/libs/iterator/doc/index.html" target="_top"><span class="bold"><strong>Boost.Iterator</strong></span></a> and <a href="http://www.boost.org/libs/range/index.html" target="_top"><span class="bold"><strong>Boost.Range</strong></span></a>, it is pretty straight forward:
        </p>
<p>
          
</p>
<pre class="programlisting">
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">iostream</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">string</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">foreach</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">iterator</span><span class="special">/</span><span class="identifier">filter_iterator</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">range</span><span class="special">/</span><span class="identifier">begin</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">range</span><span class="special">/</span><span class="identifier">end</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">range</span><span class="special">/</span><span class="identifier">iterator_range</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">range</span><span class="special">/</span><span class="identifier">result_iterator</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#define</span> <span class="identifier">foreach</span> <span class="identifier">BOOST_FOREACH</span>

<span class="keyword">namespace</span> <span class="identifier">imperfect</span> <span class="special">{</span>

    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Range</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Predicate</span><span class="special">&gt;</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">iterator_range</span><span class="special">&lt;</span>
        <span class="identifier">boost</span><span class="special">::</span><span class="identifier">filter_iterator</span><span class="special">&lt;</span>
            <span class="identifier">Predicate</span><span class="special">,</span>
            <span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">range_result_iterator</span><span class="special">&lt;</span><span class="identifier">Range</span><span class="special">&gt;::</span><span class="identifier">type</span>
        <span class="special">&gt;</span>
    <span class="special">&gt;</span>
    <span class="identifier">make_filtered</span><span class="special">(</span><span class="identifier">Range</span> <span class="special">&amp;</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">Predicate</span> <span class="identifier">pred</span><span class="special">)</span> <span class="callout_bug"><a name="egg6co" href="quick_start.html#egg6"><img src="../images/callouts/1.png" alt="1" border="0"></a></span>
    <span class="special">{</span>
        <span class="keyword">typedef</span>
            <span class="identifier">boost</span><span class="special">::</span><span class="identifier">filter_iterator</span><span class="special">&lt;</span>
                <span class="identifier">Predicate</span><span class="special">,</span>
                <span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">range_result_iterator</span><span class="special">&lt;</span><span class="identifier">Range</span><span class="special">&gt;::</span><span class="identifier">type</span>
            <span class="special">&gt;</span>
        <span class="identifier">iter_t</span><span class="special">;</span>

        <span class="keyword">return</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">iterator_range</span><span class="special">&lt;</span><span class="identifier">iter_t</span><span class="special">&gt;(</span>
            <span class="identifier">iter_t</span><span class="special">(</span><span class="identifier">pred</span><span class="special">,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">begin</span><span class="special">(</span><span class="identifier">rng</span><span class="special">),</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">end</span><span class="special">(</span><span class="identifier">rng</span><span class="special">)),</span>
            <span class="identifier">iter_t</span><span class="special">(</span><span class="identifier">pred</span><span class="special">,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">end</span><span class="special">(</span><span class="identifier">rng</span><span class="special">),</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">end</span><span class="special">(</span><span class="identifier">rng</span><span class="special">))</span>
        <span class="special">);</span>
    <span class="special">}</span>

    <span class="keyword">bool</span> <span class="identifier">is_not_X</span><span class="special">(</span><span class="keyword">char</span> <span class="identifier">ch</span><span class="special">)</span> <span class="special">{</span> <span class="keyword">return</span> <span class="identifier">ch</span> <span class="special">!=</span> <span class="char">'X'</span><span class="special">;</span> <span class="special">}</span>

    <span class="keyword">void</span> <span class="identifier">test_make_filtered</span><span class="special">()</span>
    <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="identifier">src</span><span class="special">(</span><span class="string">"abXcdXefXgh"</span><span class="special">);</span>
        <span class="identifier">foreach</span> <span class="special">(</span><span class="keyword">char</span> <span class="identifier">ch</span><span class="special">,</span> <span class="identifier">make_filtered</span><span class="special">(</span><span class="identifier">src</span><span class="special">,</span> <span class="special">&amp;</span><span class="identifier">is_not_X</span><span class="special">))</span> <span class="special">{</span>
            <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">ch</span><span class="special">;</span> <span class="callout_bug"><a name="egg7co" href="quick_start.html#egg7"><img src="../images/callouts/2.png" alt="2" border="0"></a></span>
        <span class="special">}</span>
    <span class="special">}</span>

<span class="special">}</span> <span class="comment">// namespace imperfect
</span></pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list">
<tr>
<td width="5%" valign="top" align="left">
<a name="egg6"></a><a href="#egg6co"><img src="../images/callouts/1.png" alt="1" border="0"></a> </td>
<td valign="top" align="left"><p> Take by reference, for Range isn't always <a href="http://boost.org/doc/html/CopyConstructible.html" target="_top">Copy
          Constructible</a>. </p></td>
</tr>
<tr>
<td width="5%" valign="top" align="left">
<a name="egg7"></a><a href="#egg7co"><img src="../images/callouts/2.png" alt="2" border="0"></a> </td>
<td valign="top" align="left"><p> Prints <code class="computeroutput"><span class="identifier">abcdefgh</span></code>.
          </p></td>
</tr>
</table></div>
<p>
        </p>
<p>
      </p>
<p>
        Even if you don't fully understand this code snippet, you can notice that
        it reveals several problems:
      </p>
<div class="orderedlist"><ol type="1">
<li>
          A function template is not an object.
          <div class="itemizedlist"><ul type="disc"><li>
              To get a <a href="http://www.sgi.com/tech/stl/functors.html" target="_top">Function
              Object</a>, You have to make a pointer from a template, which is
              difficult or sometimes impossible.
            </li></ul></div>
</li>
<li>
          Forwarding problem
          <div class="itemizedlist"><ul type="disc"><li>
<code class="computeroutput"><span class="identifier">make_filtered</span></code> above
              can't take non-const rvalues. So, you have to write also <code class="computeroutput"><span class="identifier">make_filtered</span><span class="special">(</span><span class="identifier">Range</span> <span class="keyword">const</span>
              <span class="special">&amp;,</span> <span class="identifier">Predicate</span><span class="special">)</span></code> version. Such irritating job is called
              <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2002/n1385.htm" target="_top">The
              Forwarding Problem</a>.
            </li></ul></div>
</li>
<li>
          Unintentional ADL
          <div class="itemizedlist"><ul type="disc"><li>
              If <code class="computeroutput"><span class="identifier">make_filtered</span></code> is
              called without qualification, your compiler will look into all the
              associated namespaces in order to find the name <code class="computeroutput"><span class="identifier">make_filtered</span></code>.
            </li></ul></div>
</li>
<li>
          Repeated tokens
          <div class="itemizedlist"><ul type="disc"><li>
<code class="computeroutput"><span class="identifier">make_filtered</span></code> clearly
              contains cut-n-paste tokens both in function declaration and body.
              This is well-known anti-pattern.
            </li></ul></div>
</li>
<li>
          Return type is unknown.
          <div class="itemizedlist"><ul type="disc"><li>
              How can your clients know the return type of <code class="computeroutput"><span class="identifier">make_filtered</span></code>?
              It is not good to document compicated return types.
            </li></ul></div>
</li>
</ol></div>
<p>
        Egg solves these problems.
      </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="egg.quick_start.building_functions"></a><a href="quick_start.html#egg.quick_start.building_functions" title="Building functions">Building functions</a></h3></div></div></div>
<p>
        In short, Egg is a library for building functions. Let's build <code class="computeroutput"><span class="identifier">make_filtered</span></code> by using one of the <a href="function_builders.html" title="Function Builders">Function Builders</a>, <a href="function_builders.html#egg.function_builders.poly" title="poly"><code class="computeroutput"><span class="identifier">poly</span></code></a>:
        </p>
<p>
          
</p>
<pre class="programlisting">
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">egg</span><span class="special">/</span><span class="identifier">poly</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">locale</span><span class="special">&gt;</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">Range</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">Predicate</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">mono_make_filtered</span>
<span class="special">{</span>
    <span class="keyword">typedef</span>
        <span class="identifier">boost</span><span class="special">::</span><span class="identifier">filter_iterator</span><span class="special">&lt;</span>
            <span class="identifier">Predicate</span><span class="special">,</span>
            <span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">range_result_iterator</span><span class="special">&lt;</span><span class="identifier">Range</span><span class="special">&gt;::</span><span class="identifier">type</span>
        <span class="special">&gt;</span>
    <span class="identifier">iter_t</span><span class="special">;</span>

    <span class="keyword">typedef</span>
        <span class="identifier">boost</span><span class="special">::</span><span class="identifier">iterator_range</span><span class="special">&lt;</span><span class="identifier">iter_t</span><span class="special">&gt;</span>
    <span class="identifier">result_type</span><span class="special">;</span>

    <span class="identifier">result_type</span> <span class="keyword">operator</span><span class="special">()(</span><span class="identifier">Range</span> <span class="special">&amp;</span><span class="identifier">rng</span><span class="special">,</span> <span class="identifier">Predicate</span> <span class="special">&amp;</span><span class="identifier">pred</span><span class="special">)</span> <span class="keyword">const</span>
    <span class="special">{</span>
        <span class="keyword">return</span> <span class="identifier">result_type</span><span class="special">(</span>
            <span class="identifier">iter_t</span><span class="special">(</span><span class="identifier">pred</span><span class="special">,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">begin</span><span class="special">(</span><span class="identifier">rng</span><span class="special">),</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">end</span><span class="special">(</span><span class="identifier">rng</span><span class="special">)),</span>
            <span class="identifier">iter_t</span><span class="special">(</span><span class="identifier">pred</span><span class="special">,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">end</span><span class="special">(</span><span class="identifier">rng</span><span class="special">),</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">end</span><span class="special">(</span><span class="identifier">rng</span><span class="special">))</span>
        <span class="special">);</span>
    <span class="special">}</span>
<span class="special">};</span>

<span class="keyword">typedef</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">egg</span><span class="special">::</span><span class="identifier">poly</span><span class="special">&lt;</span> <span class="identifier">mono_make_filtered</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">_</span><span class="special">,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">mpl</span><span class="special">::</span><span class="identifier">_</span><span class="special">&gt;</span> <span class="special">&gt;::</span><span class="identifier">type</span>
<span class="identifier">T_make_filtered</span><span class="special">;</span>

<span class="identifier">T_make_filtered</span> <span class="keyword">const</span> <span class="identifier">make_filtered</span> <span class="special">=</span> <span class="identifier">BOOST_EGG_POLY</span><span class="special">();</span> <span class="callout_bug"><a name="egg8co" href="quick_start.html#egg8"><img src="../images/callouts/1.png" alt="1" border="0"></a></span>


<span class="keyword">bool</span> <span class="identifier">is_not_X</span><span class="special">(</span><span class="keyword">char</span> <span class="identifier">ch</span><span class="special">)</span> <span class="special">{</span> <span class="keyword">return</span> <span class="identifier">ch</span> <span class="special">!=</span> <span class="char">'X'</span><span class="special">;</span> <span class="special">}</span>
<span class="keyword">bool</span> <span class="identifier">is_not_Y</span><span class="special">(</span><span class="keyword">char</span> <span class="identifier">ch</span><span class="special">)</span> <span class="special">{</span> <span class="keyword">return</span> <span class="identifier">ch</span> <span class="special">!=</span> <span class="char">'Y'</span><span class="special">;</span> <span class="special">}</span>
<span class="keyword">bool</span> <span class="identifier">is_lower</span><span class="special">(</span><span class="keyword">char</span> <span class="identifier">ch</span><span class="special">)</span> <span class="special">{</span> <span class="keyword">return</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">islower</span><span class="special">(</span><span class="identifier">ch</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">locale</span><span class="special">());</span> <span class="special">}</span>

<span class="keyword">void</span> <span class="identifier">test_make_filtered</span><span class="special">()</span>
<span class="special">{</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="identifier">src</span><span class="special">(</span><span class="string">"abXcYdXefXgYhY"</span><span class="special">);</span>

    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">egg</span><span class="special">::</span><span class="identifier">result_of_</span><span class="special">&lt;</span> <span class="callout_bug"><a name="egg9co" href="quick_start.html#egg9"><img src="../images/callouts/2.png" alt="2" border="0"></a></span>
        <span class="identifier">T_make_filtered</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="special">&amp;,</span> <span class="keyword">bool</span><span class="special">(*)(</span><span class="keyword">char</span><span class="special">))</span>
    <span class="special">&gt;::</span><span class="identifier">type</span> <span class="identifier">lowers</span> <span class="special">=</span> <span class="identifier">make_filtered</span><span class="special">(</span><span class="identifier">src</span><span class="special">,</span> <span class="special">&amp;</span><span class="identifier">is_lower</span><span class="special">);</span>

    <span class="identifier">foreach</span> <span class="special">(</span><span class="keyword">char</span> <span class="identifier">ch</span><span class="special">,</span> <span class="identifier">lowers</span><span class="special">)</span> <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">ch</span><span class="special">;</span> <span class="callout_bug"><a name="egg10co" href="quick_start.html#egg10"><img src="../images/callouts/3.png" alt="3" border="0"></a></span>
    <span class="special">}</span>

    <span class="identifier">foreach</span> <span class="special">(</span><span class="keyword">char</span> <span class="identifier">ch</span><span class="special">,</span> <span class="identifier">make_filtered</span><span class="special">(</span><span class="identifier">make_filtered</span><span class="special">(</span><span class="identifier">src</span><span class="special">,</span> <span class="special">&amp;</span><span class="identifier">is_not_X</span><span class="special">),</span> <span class="special">&amp;</span><span class="identifier">is_not_Y</span><span class="special">))</span> <span class="special">{</span> <span class="callout_bug"><a name="egg11co" href="quick_start.html#egg11"><img src="../images/callouts/4.png" alt="4" border="0"></a></span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">ch</span><span class="special">;</span> <span class="callout_bug"><a name="egg12co" href="quick_start.html#egg12"><img src="../images/callouts/5.png" alt="5" border="0"></a></span>
    <span class="special">}</span>
<span class="special">}</span>
</pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list">
<tr>
<td width="5%" valign="top" align="left">
<a name="egg8"></a><a href="#egg8co"><img src="../images/callouts/1.png" alt="1" border="0"></a> </td>
<td valign="top" align="left"><p> This macro ensures <span class="emphasis"><em>static initialization</em></span>. </p></td>
</tr>
<tr>
<td width="5%" valign="top" align="left">
<a name="egg9"></a><a href="#egg9co"><img src="../images/callouts/2.png" alt="2" border="0"></a> </td>
<td valign="top" align="left"><p> <a href="http://www.boost.org/libs/utility/utility.htm#result_of" target="_top"><span class="bold"><strong>Boost.ResultOf</strong></span></a> isn't used for now. See
          <a href="workarounds.html#egg.workarounds.result__of_" title="result_of_"><code class="computeroutput"><span class="identifier">egg</span><span class="special">::</span><span class="identifier">result_of_</span></code></a>.
          </p></td>
</tr>
<tr>
<td width="5%" valign="top" align="left">
<a name="egg10"></a><a href="#egg10co"><img src="../images/callouts/3.png" alt="3" border="0"></a> </td>
<td valign="top" align="left"><p> Prints <code class="computeroutput"><span class="identifier">abcdefgh</span></code>. </p></td>
</tr>
<tr>
<td width="5%" valign="top" align="left">
<a name="egg11"></a><a href="#egg11co"><img src="../images/callouts/4.png" alt="4" border="0"></a> </td>
<td valign="top" align="left"><p> Notice
          outmost <code class="computeroutput"><span class="identifier">make_filtered</span></code> takes
          rvalue. </p></td>
</tr>
<tr>
<td width="5%" valign="top" align="left">
<a name="egg12"></a><a href="#egg12co"><img src="../images/callouts/5.png" alt="5" border="0"></a> </td>
<td valign="top" align="left"><p> Prints <code class="computeroutput"><span class="identifier">abcdefgh</span></code>.
          </p></td>
</tr>
</table></div>
<p>
        </p>
<p>
      </p>
<p>
        Egg solves the problems stated above:
      </p>
<div class="orderedlist"><ol type="1">
<li>
<code class="computeroutput"><span class="identifier">make_filtered</span></code> is a <a href="http://www.sgi.com/tech/stl/functors.html" target="_top">Function Object</a>.
          <div class="itemizedlist"><ul type="disc"><li>
              You can pass it to algorithms as is.
            </li></ul></div>
</li>
<li>
          No forwarding problem
          <div class="itemizedlist"><ul type="disc"><li>
              You can pass non-const rvalues to <code class="computeroutput"><span class="identifier">make_filtered</span></code>
              without extra efforts.
            </li></ul></div>
</li>
<li>
          No ADL
          <div class="itemizedlist"><ul type="disc"><li>
              Now <code class="computeroutput"><span class="identifier">make_filtered</span></code> is
              an object, so that ADL isn't triggered.
            </li></ul></div>
</li>
<li>
          No repeated tokens
          <div class="itemizedlist"><ul type="disc"><li>
              You can access <code class="computeroutput"><span class="identifier">iter_t</span></code>
              and <code class="computeroutput"><span class="identifier">result_type</span></code> from
              <code class="computeroutput"><span class="keyword">operator</span><span class="special">()</span></code>
              body.
            </li></ul></div>
</li>
<li>
<a href="http://www.boost.org/libs/utility/utility.htm#result_of" target="_top"><span class="bold"><strong>Boost.ResultOf</strong></span></a> compatible
          <div class="itemizedlist"><ul type="disc"><li>
              Your clients can extract return types using standardized interface
              <code class="computeroutput"><span class="identifier">result_of</span></code>.
            </li></ul></div>
</li>
</ol></div>
<p>
        As a bonus, <code class="computeroutput"><span class="identifier">make_filtered</span></code>
        can be passed to <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">lambda</span><span class="special">::</span><span class="identifier">bind</span></code>. In other words, it is a model of
        <a href="concepts.html#egg.concepts.major_function_object" title="Major Function Object">Major Function Object</a>.
      </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="egg.quick_start.higher_order_functions"></a><a href="quick_start.html#egg.quick_start.higher_order_functions" title="Higher-order functions">Higher-order
      functions</a></h3></div></div></div>
<p>
        <code class="computeroutput"><span class="identifier">make_filtered</span><span class="special">(</span><span class="identifier">make_filtered</span><span class="special">(...),...)</span></code>
        might be less readable. Egg provides <a href="function_adaptors.html#egg.function_adaptors.pipable" title="pipable"><code class="computeroutput"><span class="identifier">pipable</span></code></a>, which is one of the <a href="function_adaptors.html" title="Function Adaptors">Function Adaptors</a> also known as higher-order
        functions:
        </p>
<p>
          
</p>
<pre class="programlisting">
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">egg</span><span class="special">/</span><span class="identifier">pipable</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="identifier">boost</span><span class="special">::</span><span class="identifier">egg</span><span class="special">::</span><span class="identifier">result_of_pipable</span><span class="special">&lt;</span><span class="identifier">T_make_filtered</span><span class="special">&gt;::</span><span class="identifier">type</span>
    <span class="keyword">const</span> <span class="identifier">filtered</span> <span class="special">=</span> <span class="identifier">BOOST_EGG_PIPABLE_L</span> <span class="identifier">BOOST_EGG_POLY</span><span class="special">()</span> <span class="identifier">BOOST_EGG_PIPABLE_R</span><span class="special">;</span> <span class="callout_bug"><a name="egg13co" href="quick_start.html#egg13"><img src="../images/callouts/1.png" alt="1" border="0"></a></span>

<span class="keyword">void</span> <span class="identifier">test_pipable</span><span class="special">()</span>
<span class="special">{</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="identifier">src</span><span class="special">(</span><span class="string">"abXcYdXefXgYhY"</span><span class="special">);</span>
    <span class="identifier">foreach</span> <span class="special">(</span><span class="keyword">char</span> <span class="identifier">ch</span><span class="special">,</span> <span class="identifier">src</span><span class="special">|</span><span class="identifier">filtered</span><span class="special">(&amp;</span><span class="identifier">is_not_X</span><span class="special">)|</span><span class="identifier">filtered</span><span class="special">(&amp;</span><span class="identifier">is_not_Y</span><span class="special">))</span> <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">ch</span><span class="special">;</span>
    <span class="special">}</span>
<span class="special">}</span>
</pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list"><tr>
<td width="5%" valign="top" align="left">
<a name="egg13"></a><a href="#egg13co"><img src="../images/callouts/1.png" alt="1" border="0"></a> </td>
<td valign="top" align="left"><p> Recall the initializer of <code class="computeroutput"><span class="identifier">T_make_filtered</span></code>
          is <code class="computeroutput"><span class="identifier">BOOST_EGG_POLY</span><span class="special">()</span></code>.
          </p></td>
</tr></table></div>
<p>
        </p>
<p>
      </p>
<p>
        <a href="function_adaptors.html#egg.function_adaptors.pipable" title="pipable"><code class="computeroutput"><span class="identifier">pipable</span></code></a>
        can be regarded as <a href="http://en.wikipedia.org/wiki/Extension_method" target="_top">Extension
        method</a> emulation in C++. In addition, <a href="function_adaptors.html#egg.function_adaptors.lazy" title="lazy"><code class="computeroutput"><span class="identifier">lazy</span></code></a>, cooperating with <a href="http://www.boost.org/libs/lambda/" target="_top"><span class="bold"><strong>Boost.Lambda</strong></span></a>, adapts a function into lazily
        evaluated one:
        </p>
<p>
          
</p>
<pre class="programlisting">
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">egg</span><span class="special">/</span><span class="identifier">lazy</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">lambda</span><span class="special">/</span><span class="identifier">core</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span> <span class="comment">// _1
</span>
<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">MakeRange</span><span class="special">&gt;</span>
<span class="keyword">void</span> <span class="identifier">my_foreach</span><span class="special">(</span><span class="identifier">MakeRange</span> <span class="identifier">make</span><span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="identifier">src</span><span class="special">(</span><span class="string">"abXcYdXefXgYhY"</span><span class="special">);</span>
    <span class="identifier">foreach</span> <span class="special">(</span><span class="keyword">char</span> <span class="identifier">ch</span><span class="special">,</span> <span class="identifier">make</span><span class="special">(</span><span class="identifier">src</span><span class="special">))</span> <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">ch</span><span class="special">;</span>
    <span class="special">}</span>
<span class="special">}</span>

<span class="keyword">void</span> <span class="identifier">test_lazy</span><span class="special">()</span>
<span class="special">{</span>
    <span class="keyword">namespace</span> <span class="identifier">bll</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">lambda</span><span class="special">;</span>

    <span class="special">::</span><span class="identifier">my_foreach</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">egg</span><span class="special">::</span><span class="identifier">lazy</span><span class="special">(</span><span class="identifier">make_filtered</span><span class="special">)(</span><span class="identifier">bll</span><span class="special">::</span><span class="identifier">_1</span><span class="special">,</span> <span class="special">&amp;</span><span class="identifier">is_lower</span><span class="special">));</span> <span class="callout_bug"><a name="egg14co" href="quick_start.html#egg14"><img src="../images/callouts/1.png" alt="1" border="0"></a></span>

    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">egg</span><span class="special">::</span><span class="identifier">result_of_lazy</span><span class="special">&lt;</span><span class="identifier">T_make_filtered</span><span class="special">&gt;::</span><span class="identifier">type</span> <span class="identifier">make_Filtered</span><span class="special">;</span> <span class="callout_bug"><a name="egg15co" href="quick_start.html#egg15"><img src="../images/callouts/2.png" alt="2" border="0"></a></span>
    <span class="special">::</span><span class="identifier">my_foreach</span><span class="special">(</span><span class="identifier">make_Filtered</span><span class="special">(</span><span class="identifier">make_Filtered</span><span class="special">(</span><span class="identifier">bll</span><span class="special">::</span><span class="identifier">_1</span><span class="special">,</span> <span class="special">&amp;</span><span class="identifier">is_not_X</span><span class="special">),</span> <span class="special">&amp;</span><span class="identifier">is_not_Y</span><span class="special">));</span>
<span class="special">}</span>
</pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list">
<tr>
<td width="5%" valign="top" align="left">
<a name="egg14"></a><a href="#egg14co"><img src="../images/callouts/1.png" alt="1" border="0"></a> </td>
<td valign="top" align="left"><p> Using <a href="function_adaptors.html#egg.function_adaptors.lazy" title="lazy"><code class="computeroutput"><span class="identifier">lazy</span></code></a>
          as higher-order function. </p></td>
</tr>
<tr>
<td width="5%" valign="top" align="left">
<a name="egg15"></a><a href="#egg15co"><img src="../images/callouts/2.png" alt="2" border="0"></a> </td>
<td valign="top" align="left"><p> When you dislike to write <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">egg</span><span class="special">::</span><span class="identifier">lazy</span></code>
          multiple times, the metafunction also is available. </p></td>
</tr>
</table></div>
<p>
        </p>
<p>
      </p>
<p>
        <a href="function_adaptors.html" title="Function Adaptors">Function Adaptors</a> can provide
        several "views" into functions on demand.
      </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="egg.quick_start.reading_doc"></a><a href="quick_start.html#egg.quick_start.reading_doc" title="Reading Doc">Reading Doc</a></h3></div></div></div>
<p>
        The organization of Egg is "flat". Egg can be regarded as federation
        of <a href="function_builders.html" title="Function Builders">Function Builders</a> and <a href="function_adaptors.html" title="Function Adaptors">Function Adaptors</a>. Each component
        is usually independent from each other, so that you can read the sections
        with any order.
      </p>
<a name="egg.quick_start.reading_doc.notation"></a><h5>
<a name="id519650"></a>
        <a href="quick_start.html#egg.quick_start.reading_doc.notation">Notation</a>
      </h5>
<p>
        The <a href="../index.html#egg.overview.notation" title="Notation">Notation</a> section introduces
        several keywords for documentation. A word which begins with <code class="computeroutput"><span class="identifier">__</span></code> is a keyword. When you forget its semantics,
        just click the keyword.
      </p>
<a name="egg.quick_start.reading_doc.concepts"></a><h5>
<a name="id519700"></a>
        <a href="quick_start.html#egg.quick_start.reading_doc.concepts">Concepts</a>
      </h5>
<p>
        The <a href="concepts.html" title="Concepts">Concepts</a> section describes the concepts
        used in Egg. By the design rationale, <a href="concepts.html" title="Concepts">Concepts</a>
        doesn't introduce any new "traits" something like <code class="computeroutput"><span class="identifier">is_bindable</span><span class="special">&lt;&gt;</span></code>
        etc. Those just define the valid expressions and semantics. The most important
        concepts are <a href="concepts.html#egg.concepts.little_function" title="Little Function">Little Function</a>
        and <a href="concepts.html#egg.concepts.major_function_object" title="Major Function Object">Major Function Object</a>.
        Other conepts can read on demand.
      </p>
<a name="egg.quick_start.reading_doc.forwarding_strategies"></a><h5>
<a name="id519787"></a>
        <a href="quick_start.html#egg.quick_start.reading_doc.forwarding_strategies">Forwarding
        Strategies</a>
      </h5>
<p>
        The <a href="forwarding_strategies.html" title="Forwarding Strategies">Forwarding Strategies</a>
        section defines strategy tags for argument forwarding. Almost all of Egg
        requires these as parameters. Fortunately, the default behavior, <a href="forwarding_strategies.html#egg.forwarding_strategies.by_perfect" title="by_perfect"><code class="computeroutput"><span class="identifier">by_perfect</span></code></a>, works so well in most
        cases that you can skip reading <a href="forwarding_strategies.html" title="Forwarding Strategies">Forwarding
        Strategies</a> when first reading the documentation.
      </p>
<a name="egg.quick_start.reading_doc.function_builders"></a><h5>
<a name="id519859"></a>
        <a href="quick_start.html#egg.quick_start.reading_doc.function_builders">Function Builders</a>
      </h5>
<p>
        <a href="function_builders.html" title="Function Builders">Function Builders</a> build <a href="concepts.html#egg.concepts.major_function_object" title="Major Function Object">Major Function Object</a>
        type. As mentioned above, <a href="function_builders.html#egg.function_builders.function" title="function"><code class="computeroutput"><span class="identifier">function</span></code></a> is the most primitive builder.
        First, it might be preferable to understand <a href="function_builders.html#egg.function_builders.function" title="function"><code class="computeroutput"><span class="identifier">function</span></code></a> with <a href="concepts.html#egg.concepts.little_function" title="Little Function">Little
        Function</a> concept. Second, I recommend <a href="function_builders.html#egg.function_builders.poly" title="poly"><code class="computeroutput"><span class="identifier">poly</span></code></a>, which is a cool builder originally
        written by David Abrahams.
      </p>
<a name="egg.quick_start.reading_doc.function_adaptors"></a><h5>
<a name="id519971"></a>
        <a href="quick_start.html#egg.quick_start.reading_doc.function_adaptors">Function Adaptors</a>
      </h5>
<p>
        <a href="function_adaptors.html" title="Function Adaptors">Function Adaptors</a> are higher-order
        functions which take a function then return adapted function. <a href="function_adaptors.html#egg.function_adaptors.fuse" title="fuse"><code class="computeroutput"><span class="identifier">fuse</span></code></a> and <a href="function_adaptors.html#egg.function_adaptors.unfuse" title="unfuse"><code class="computeroutput"><span class="identifier">unfuse</span></code></a> might be one of the most
        interesting adaptors, which provides "fusing".
      </p>
<a name="egg.quick_start.reading_doc.function_objects_and_utilities"></a><h5>
<a name="id520048"></a>
        <a href="quick_start.html#egg.quick_start.reading_doc.function_objects_and_utilities">Function
        Objects and Utilities</a>
      </h5>
<p>
        The <a href="function_objects.html" title="Function Objects">Function Objects</a> section
        provides useful functions which have been requested in <a href="http://www.boost.org/more/mailing_lists.htm#users" target="_top">Boost
        users list</a> several times. For <a href="utilities.html" title="Utilities">Utilities</a>,
        <a href="utilities.html#egg.utilities.infix" title="infix"><code class="computeroutput"><span class="identifier">infix</span></code></a>
        might be interesting, which is ported from <a href="http://www.cc.gatech.edu/~yannis/fc++/" target="_top"><span class="bold"><strong>FC++</strong></span></a>.
      </p>
<a name="egg.quick_start.reading_doc.workarounds"></a><h5>
<a name="id520135"></a>
        <a href="quick_start.html#egg.quick_start.reading_doc.workarounds">Workarounds</a>
      </h5>
<p>
        <a href="workarounds.html" title="Workarounds">Workarounds</a> is a set of workarounds.
        For now, only <a href="workarounds.html#egg.workarounds.const" title="CONST"><code class="computeroutput"><span class="identifier">BOOST_EGG_CONST</span></code></a>
        might be worth reading.
      </p>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2007 -2008 Shunsuke Sogame<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../index.html"><img src="../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="concepts.html"><img src="../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
